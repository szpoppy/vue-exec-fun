"use strict";function _toConsumableArray(n){if(Array.isArray(n)){for(var e=0,r=Array(n.length);e<n.length;e++)r[e]=n[e];return r}return Array.from(n)}function _defineProperty(n,e,r){return e in n?Object.defineProperty(n,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[e]=r,n}function assign(n,e){for(var r in e)if(hasOwnProperty.call(e,r)){var t=toString.call(n[r]).toLowerCase(),o=toString.call(e[r]).toLowerCase();if(t==o&&"[object object]"==o){assign(n[r],e[r]);continue}n[r]=e[r]}}function vueFunOn(n){pluginArr.push(n)}function vueFunInstall(n,e){Vue=n,e&&pluginArr.push(e)}function warn(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"before";console.warn(msgOpt[n]||n||"")}function vueFun(n){function e(n,e){void 0===e&&(e=this);for(var r=n.split("."),t=0;t<r.length&&null!=(e=e[r[t]]);t+=1);return e}function r(n){return function(){return new Promise(function(e){if(!v)return void y.push({resolve:e,key:n,args:arguments});if("function"==typeof n)return void e(fn.apply(v,arg.concat(arguments)));if("string"==typeof n){var r;return void e((r=v)[n].apply(r,arguments))}e(null)})}}function t(n,r){if(!v)return null;if(void 0===n)return v;var t=e(n,v);return void 0===r?t:t.call(v,r)}function o(n,e){Object.defineProperty(n,e,{get:function(){return(v||g)[e]},set:function(n){(v||g)[e]=n}})}function i(n,r){var t=v||g;if("string"==typeof n){if(void 0===r)return e(n,t);n=_defineProperty({},n,r)}var i={};return assign(g,n),Object.keys(n).forEach(function(n){o(i,n)}),Object.freeze(i)}function u(n){var e=n.value;return"function"==typeof e?r(e):e}function a(n){function e(n,e){if(d)return void warn();r&&!m[r]&&(m[r]=a);var i=u&&{}||null;"string"==typeof n&&(n=_defineProperty({},n,e));for(var f in n)if(hasOwnProperty.call(n,f)&&(a[f]=n[f],i))if(t){var c=t({value:n[f],backData:i,key:f,opt:a});void 0!==c&&(i[f]=c)}else i[f]=e;return i&&o?Object.freeze(i):i}var r=n.prot,t=n.format,o=n.isFreeze,i=n.isBack,u=void 0===i||i,a={};return{data:a,on:e}}function f(n,e){return function(r){return d?void warn():(m[n]=r,e?e(r):r)}}function c(){if(d)return void warn();h.push.apply(h,arguments)}function l(n){return function(){for(var e=0;e<n.length;e+=1)n[e].apply(this,arguments)}}function s(){var n={},e={on:function(r,t){if("string"==typeof r){var o=n[r];return o||(o=n[r]=[]),void o.push(t)}for(var i in r)e.on(i,r[i]);return e},make:function(e){"string"==typeof e&&((e=m[e])||(e=m[e]={}));for(var r in n)e[r]=l(n[r]);return e},emit:function(e){for(var r=n[e]||[],t=arguments.length,o=Array(t>1?t-1:0),i=1;i<t;i++)o[i-1]=arguments[i];for(var u=0;u<r.length;u+=1)r[u].apply(v,o)},currying:function(n){return function(r){return e.on(n,r)}},has:function(){for(var e in n)return!0;return!1}};return e}var p={},v=void 0,d=!1,y=[],g={},m={data:function(){return g}},h=[],$=s();$.on("beforeCreate",function(){for(v=this;y.length;){var n=y.shift(),e=n.args||[];if(n.fn&&n.resolve(n.fn.apply(v,e)),n.key){var r;n.resolve((r=v)[n.key].apply(r,_toConsumableArray(e)))}}}),$.on("created",function(){v=this}),$.on("destroyed",function(){v=null,d=!1;for(var n in p)0==n.indexOf("$handleT$")&&clearTimeout(p[n]),0==n.indexOf("$handleI$")&&clearInterval(p[n]),p[n]=void 0,delete p[n]});var b=r("$emit"),k={temp:p,options:m,data:g,$vm:t,$bind:r,$name:f("name"),$mixin:c,$components:a({prot:"components",sBack:!1}).on,$directives:a({prot:"directives",isBack:!1}).on,$props:a({prot:"props",isFreeze:!0,format:function(n){var e=n.backData,r=n.key,t=n.value,o={get:function(){return v?v[r]:null}},i="";"[object object]"==toString.call(t).toLowerCase()&&(i=t.setFn,i&&(o.set="function"!=typeof i?function(n){b(i,n)}:i),delete t.setFn),Object.defineProperty(e,r,o)}}).on,$data:i,$computed:a({prot:"computed",isFreeze:!0,format:function(n){var e=n.backData,r=n.key;Object.defineProperty(e,r,{get:function(){return v?v[r]:null},set:function(n){v&&(v[r]=n)}})}}).on,$filters:a({prot:"filters",isFreeze:!0,format:u}).on,$model:a({prot:"model",isBack:!1}).on,$watch:function(n,e){return function(){d?e.apply(void 0,arguments):n.apply(void 0,arguments)}}(a({prot:"watch",isBack:!1}).on,r("$watch")),$methods:a({prot:"methods",isFreeze:!0,format:u}).on,$lifecycle:$.on,$created:$.currying("created"),$mounted:$.currying("mounted"),$destroyed:$.currying("destroyed"),$emit:b,$nextTick:r("$nextTick")},O=[];return pluginArr.forEach(function(n){n({temp:p,options:m,data:g,$vm:t,after:function(n){O.push(n)},fnArg:k,lifecycle:$,makeLifecycle:s,setter:a,fnToBindVM:u,quickVueNext:r,setProt:f})}),n&&n(k),O.forEach(function(n){n(k)}),$.make(m),h.length&&(m.mixins=h),d=!0,m}Object.defineProperty(exports,"__esModule",{value:!0}),exports.vueFunInstall=vueFunInstall;var hasOwnProperty=Object.prototype.hasOwnProperty,toString=Object.prototype.toString,Vue=void 0,pluginArr=[],msgOpt={before:"vue已经初始化，请在初始化之前调用",after:"vue还没初始化，请在created之后调用"};vueFun.on=vueFunOn,vueFun.install=vueFunInstall,exports.default=vueFun;